## 设置阈值/指定敏感度


预计用时：2 分钟

算法返回的是概率。您可以“原样”使用返回的概率（例如，2018年10月11日 9:30在线人数2000，算法判断该点的异常概率是 0.00023），也可以将返回的概率转换成二元值（例如，这个点是异常点）。

如果某个算法对某个时刻进行异常检测，并判断该时刻为异常的概率为 0.9995，则表示该模型预测这个点非常可能是异常点。相反，在同一个逻辑回归模型中预测分数为 0.0003 的另一封电子邮件很可能不是垃圾邮件。可如果某封电子邮件的预测分数为 0.6 呢？为了将逻辑回归值映射到二元类别，您必须指定分类阈值（也称为判定阈值）。如果值高于该阈值，则表示“垃圾邮件”；如果值低于该阈值，则表示“非垃圾邮件”。人们往往会认为分类阈值应始终为 0.5，但阈值取决于具体问题，因此您必须对其进行调整。

我们将在后面的部分中详细介绍可用于对分类模型的预测进行评估的指标，以及更改分类阈值对这些预测的影响。

注意：“调整”逻辑回归的阈值不同于调整学习速率等超参数。
在选择阈值时，需要在降低误告和提升故障检出之间找到一个平衡点。例如，误告虽然会导致不好的用户体验，但是相比于漏警，用户应该更加重视后者。


## 混淆矩阵

预计用时：5 分钟
在本部分，我们将定义用于评估分类模型的指标的主要组成部分-混淆矩阵。不过，我们先来看一则寓言故事：

伊索寓言：狼来了（精简版）

有一位牧童要照看镇上的羊群，但是他开始厌烦这份工作。为了找点乐子，他大喊道：“狼来了！”其实根本一头狼也没有出现。村民们迅速跑来保护羊群，但他们发现这个牧童是在开玩笑后非常生气。

[这样的情形重复出现了很多次。]

一天晚上，牧童看到真的有一头狼靠近羊群，他大声喊道：“狼来了！”村民们不想再被他捉弄，都待在家里不出来。这头饥饿的狼对羊群大开杀戒，美美饱餐了一顿。这下子，整个镇子都揭不开锅了。恐慌也随之而来。

我们做出以下定义：

“狼来了”是正类别。
“没有狼”是负类别。
我们可以使用一个 2x2 混淆矩阵来总结我们的“狼预测”模型，该矩阵描述了所有可能出现的结果（共四种）：

真正例 (TP)：
真实情况：受到狼的威胁。
牧童说：“狼来了。”
结果：牧童是个英雄。
假正例 (FP)：
真实情况：没受到狼的威胁。
牧童说：“狼来了。”
结果：村民们因牧童吵醒他们而感到非常生气。
假负例 (FN)：
真实情况：受到狼的威胁。
牧童说：“没有狼”。
结果：狼吃掉了所有的羊。
真负例 (TN)：
真实情况：没受到狼的威胁。
牧童说：“没有狼”。
结果：大家都没事。
真正例是指模型将正类别样本正确地预测为正类别。同样，真负例是指模型将负类别样本正确地预测为负类别。

假正例是指模型将负类别样本错误地预测为正类别，而假负例是指模型将正类别样本错误地预测为负类别。

在后面的部分中，我们将介绍如何使用从这四种结果中衍生出的指标来评估分类模型。