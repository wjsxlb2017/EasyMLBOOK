[TOC]


#标准化

将实际的值区间转换为标准的值区间（通常为 -1 到 +1 或 0 到 1）的过程。例如，假设某个特征的自然区间是 800 到 6000。通过减法和除法运算，您可以将这些值标准化为位于 -1 到 +1 区间内。



## 场景可视化

下图中，第一个图是原始的时序图，横轴表示时间，纵轴表示取值，可以看到原始的区在在180~900之间。
经过标准化之后，这根曲线的取值会集中在0附近。
做标准化处理，就是对曲线的值进行缩放，落入同一个量岗范围，从而使得不同的曲线都具有可比性。
![](../_image/标准化.png)



## 原理可视化

![](../_image/标准化1.png)

  - 数据形式：[Dense](http://tesla.oa.com/gitbook/doc/javis/tdw_ml_jarvis_dataformat.html#21-dense%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F)
  - 格式：| 参与计算的features | 不参与计算的features |
  - 参与计算的features：通过**特征配置文件**指定
  - 不参与计算的features：可包括不参与计算的特征，如果存在则保留在输出中



## **参数**

  - "method": “minmax"和"standard"分别代表了相应的归一化方法MinMaxScaler和StandardScaler。
    MinMaxScaler方法表示对特征数据进行统一的归一化处理，默认归一化后的特征数值范围在[0,1]，用户也可以指定归一化后的取值范围为[min,max]。 该归一化的计算公式为：
    $$(x-EMin)/(EMax-EMin)*(max-min)+min$$

      StandardScaler算法主要对特征进行标准化处理，原始特征数据通过该算法的转化将成为方差为1，均值为0的新的特征。计算公式为：

  $$\frac{(x-Mean}{Var}$$

  其中，Mean代表该特征的平均值，Var表示该特征的样本标准差。以下的特殊情况应该**注意**:

  (1)如果Var为0，则x标准化后的结果直接为0.0

  (2)不需要均值化处理：此时算法只做方差处理，即：x/Var

  (3)不需要方差处理:x直接取值(x-Mean)

  (4)首次使用该模块，算法内部会将特征转换的如下五个内容保存在HDFS路径中，这些内容分别是：特征的Id,是否需要做均值的标准化，是否需要做方差的标准化，特征的均值，特征的方差。当再次使用该模块时，算法将直接使用该HDFS路径中的上述配置进行转换，用户无需再填写配置文件。若不提供HDFS路径，则不会保存上述的内容。

  - "colStr":需要做相应处理的特征id,取值根据该特征在原始表的所在列，从0开始计数。多个特征可用","隔开，还可用"-"标识特征的起始到结束列，例如"1-20"表示第1列到第20列。
  - "min":归一化后的最小值
  - "max":归一化后的最大值
  - "std":是否需要做方差的标准化
  - "mean":是否需要做均值的标准化
