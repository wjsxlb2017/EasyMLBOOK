# 算法说明

异常值填充节点，可用于填充数据中出现的极端异常值。

# 参数

- 节点参数：

| 参数英文名      | 参数中文名       |参数描述|
|------------|--------------------|----------------|
| outlier_type   | 异常值类型|异常值类型有以下类型: constant/N-sigma/boxplot, 默认值为N-sigma|
| outlier_params   | 定义异常值的参数| 跟异常值类型相关的参数， 格式为json |
| fill_method   | 填充方法|  填充方法有以下几个可选值:"spline", "linear"|
| fill_params   | 填充方法的参数|  填充方法的参数，格式为json|

关于节点的详细说明：
- outlier_type: 异常值类型有以下几种取值
constant:常数,用户指定的值为缺失值
N-sigma:N倍标准差,在N-sigma原则下，异常值如超过N倍标准差，那么可以将其视为异常值。这里默认取N为5                              
boxplot:箱线图,这种方法是利用箱型图的四分位距（IQR）对异常值进行检测，也叫Tukey‘s test。四分位距(IQR)就是上四分位与下四分位的差值。而我们通过IQR的1.5倍为标准，规定：超过（上四分位+1.5倍IQR距离，或者下四分位-1.5倍IQR距离）的点为异常值。  
- outlier_params: 定义异常值的参数。
	- outlier_type取值为"constant"时，outlier_params的输入格式为{"value": -1}, -1表示对异常的地方进行替换。
	- outlier_type取值为"N-sigma"时，outlier_params的输入格式为{"N": 5}, 5即为标准差的倍数。


- fill_method: 填充方法有下几种

| 填充方法 | 填充方法中文名|说明                                         |
|------------|--------------|------------------------------|
| constant  |常数| 用户可指定填充的数值为1个常数                                    |
| previous | 上一个时刻的值    |上一个非缺失值                                 |
| next    | 下一个时刻的值         |下一个非缺失值                             |
| nearest  | 最近一个时刻的值  |距离最近的非缺失值                               |
| linear  | 相邻非缺失值的线性插值|相邻非缺失值的线性插值
| spline  | 样条插值 |样条插值
| pchip  | 分段三次Hermite 插值多项式|分段三次Hermite 插值多项式
| movmean   | 窗口长度为window 的移动均值|窗口长度为window 的移动均值|
| movmedian | 窗口长度为window的移动中位数|窗口长度为window的移动中位数|


# 输入输出概览

输入数据预览如下：


| timestamp     | value | label |
|---------------|-------|-------|
| 2017/8/6 0:00:00 | 65013 | 0     |
| 2017/8/6 0:01:00 | -5 | 0     |
| 2017/8/6 0:02:00 | 64058 | 0     |
| 2017/8/6 0:03:00 | 63587 | 0     |
| 2017/8/6 0:04:00 | 63085 | 0     |

使用异常值处理节点的默认参数处理了value列之后，输出为：

| timestamp     | value | label | outputCol |
|---------------|-------|-------|-----------|
| 2017/8/6 0:00 | 65013 | 0     | 65013 |
| 2017/8/6 0:01 | -5 | 0     | 65013 |
| 2017/8/6 0:02 | 64058 | 0     | 64058  |
| 2017/8/6 0:03 | 63587 | 0     | 63587 |
| 2017/8/6 0:04 | 63085 | 0     | 63085 |



